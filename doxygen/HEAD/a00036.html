<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>Design choices and libraries&#39; internals</title>
<link href="tabs.css" rel="stylesheet" type="text/css">
<link href="doxygen.css" rel="stylesheet" type="text/css">
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/SVG"],
});
</script>
<script src="MathJax/MathJax.js"></script>
<!-- To use the latest MathJax version instead, you can use: -->
<!--<script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>-->
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
</head><body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('a00036.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(12)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Design choices and libraries' internals </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This package is divided into three parts:</p>
<ul>
<li>
Functions which represent different kinds of mathematical functions and their associated features (gradient, hessian, etc.). </li>
<li>
A problem class defining a whole optimization problem including some technical details (scaling). </li>
<li>
A solver hierarchy defining solvers that are working on a class of optimizations problem (for instance, a QP solver solves problems with a quadratic objective function and linear constraints). </li>
</ul>
<h1><a class="anchor" id="fct"></a>
The function hierarchy</h1>
<p>The function hierarchy is an abstract hierarchy which defines <b>meta-functions</b> in the sense that the user has to derive from these classes to define its <b>real</b> function.</p>
<div class="fragment"><div class="line"><span class="keyword">struct </span>MyLinearFunction : <span class="keyword">public</span> <a class="code" href="a00308.html#abbf3e635a932ae99934936a092aec72c">LinearFunction</a> {</div>
<div class="line">  <span class="comment">// FIXME: some code is missing</span></div>
<div class="line">};</div>
<div class="line"></div>
<div class="line"><span class="keyword">struct </span>MyDerivableFunction : <span class="keyword">public</span> <a class="code" href="a00308.html#a3b8400e3e4a5bc0372d283a4db8eb0de">DerivableFunction</a> {</div>
<div class="line">  <span class="comment">// FIXME: some code is missing</span></div>
<div class="line">};</div>
<div class="line"><span class="comment">// etc...</span></div>
</div><!-- fragment --><p>Users can define as many functions as they want as long as they respect the constraints defined by the classes they inherit from: </p>
<ul>
<li>
Any function must be able to be evaluated (through operator()). </li>
<li>
A derivable function has a gradient/Jacobian matrix. </li>
<li>
A twice-derivable function ( \(C^2\)) has a Hessian matrix. </li>
<li>
A quadratic function has the same constraints as a \(C^2\) function. </li>
<li>
A linear function has the same constraints except its Hessian matrix is null and computed automatically by the abstract class. </li>
</ul>
<p>It is important to note that all of these functions are \(\mathbb{R}^n \rightarrow \mathbb{R}^m\) functions.</p>
<p>These functions have to be considered as m functions such that \(\mathbb{R}^n \rightarrow \mathbb{R}\). In particular, it means that in the gradient/Hessian methods, the second argument (integer) refers to which function you want to get the gradient/Hessian from.</p>
<p>It avoids useless computations when the whole Jacobian is not needed. Hence, it also avoids the use of a tensor as this structure is particularly costly and not built-in in Eigen (the matrix library the package relies on).</p>
<p>This set of meta-functions is completed by two generic implementations of quadratic and linear functions in respectively NumericQuadraticFunction and NumericLinearFunction. Those are real functions as the user is meant to instantiate them, not derive from them.</p>
<h1><a class="anchor" id="pb"></a>
The problem class</h1>
<p>The problem class defines a complete optimization problem. It is composed of: </p>
<ul>
<li>
A \(\mathbb{R}^n \rightarrow \mathbb{R}\) cost (or objective) function. </li>
<li>
A set of functions constraints. </li>
<li>
Bounds on the input arguments. </li>
<li>
Bounds on the constraints functions output. </li>
<li>
Scaling on the input arguments. </li>
<li>
Scaling on the constraint functions output. </li>
</ul>
<p>The problem class is templated by two parameters: </p>
<ul>
<li>
The objective's function type (F). </li>
<li>
The set of constraint's types (C). </li>
</ul>
<p>Those two parameters define a class of problem. For instance, a QP solver solvers problems where the objective function is quadratic and the constraints are linear.</p>
<p>Each class of problem matches a set of solvers designed to solve exactly those problems.</p>
<p>The copy constructor of the Problem class allows to make the problem more generic by replacing F or C by a more general type.</p>
<p>Examples: </p>
<ul>
<li>
It is valid to convert a linear problem into a nonlinear problem and make a QP solve it. </li>
<li>
But, the opposite is not valid. </li>
</ul>
<p>I.e.: you can always go higher in the function hierarchy but you cannot go deeper.</p>
<p>However, this transformation (as any dynamic typing) causes to <b>forget</b> specific information and might slow down the process. For example: solving a linear problem as a nonlinear one is slower than directly solving it with methods specific to linear problems.</p>
<h1><a class="anchor" id="slv"></a>
The solver hierarchy</h1>
<p>The solver hierarchy is divided into three parts: </p>
<ul>
<li>
The generic solver. </li>
<li>
The solver for a class of problems. </li>
<li>
The bridges (the leaves in the hierarchy's tree). </li>
</ul>
<h2><a class="anchor" id="gs"></a>
Generic solver</h2>
<p>The generic solver is an abstract class which is the root of the hierarchy. All the solvers have to inherit from this class directly or indirectly.</p>
<p>It only defines three methods: </p>
<ul>
<li>
<code>solve</code> (virtual pure) </li>
<li>
<code>getMinimum</code> </li>
<li>
<code>reset</code> </li>
</ul>
<p>The method <code>solve</code> has to fill the protected attribute <code>result_</code>. It is implemented by the bridges at the bottom of the hierarchy.</p>
<p>By default <code>result_</code> contains an instance of the <code>No_Solution</code> class. It has to be changed to an instance of <code>Result</code> or <code>SolverError</code>.</p>
<ul>
<li>
<code>No_Solution</code>: represents the fact that solve has never been called. A user should never retrieve an instance of <code>No_Solution</code>.  </li>
<li>
<code>Result</code>: represents a <b>valid</b> result. Some non-critical problems might have happened and are specified in the warnings vector (minor numerical instabilities for instance). </li>
<li>
<code>SolverError</code>: indicates that the optimization has <b>failed</b>. </li>
</ul>
<p>The <code>solve</code> method should rarely be called by the user. Instead, the user calls <code>getMinimum</code> which calls <code>solve</code> if required. If <code>getMinimum</code> is called several times, the problem is only solved once.</p>
<p>The <code>reset</code> method should be called when one wants to manually force the recomputation of the solution.</p>
<h2><a class="anchor" id="solver"></a>
Solver</h2>
<p>The <code>Solver</code> class is parametrized by two parameters as the <code>Problem</code> class. It defines an abstract solver for a class of optimization problems.</p>
<p>For instance, a QP should inherit from <code>Solver&lt;QuadraticFunction, LinearFunction&gt;</code>.</p>
<p>This level of the hierarchy integrates the notion of <code>Problem</code>, hence the <code>problem</code> method is defined to access the problem. Once a solver is created with a problem, the problem can never be modified again.</p>
<h2><a class="anchor" id="briges"></a>
Bridges</h2>
<p>The leaves of the hierarchy are bridges. The role of a bridge is to convert the generic representation of the problem into the solver's representation. It might also emulate some missing features of the back-end solver.</p>
<p>A bridge mainly implements the <code>solve</code> method. It may also expose the underlying solver's internal mechanism for fine tuning. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.6-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="index.html">User manual</a></li>
    <li class="footer">Generated on Sat Aug 27 2016 12:54:49 for roboptim-core by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
